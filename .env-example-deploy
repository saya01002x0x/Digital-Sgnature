# ==========================================
# DEPLOYMENT MODE: Choose LOCAL or CLOUD
# ==========================================
# Set to "local" for Docker development, "cloud" for Supabase + Cloudflare R2
DEPLOY_MODE=cloud

# ==========================================
# 1. DATABASE CONFIGURATION
# ==========================================

# ----- OPTION A: LOCAL DOCKER (Development) -----
# Uncomment these for local Docker development
# POSTGRES_DB=miiao29_db
# POSTGRES_USER=miiao29_user
# POSTGRES_PASSWORD=miiao29_pass
# POSTGRES_PORT=5433
# POSTGRES_INTERNAL_PORT=5432
# SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/miiao29_db
# SPRING_DATASOURCE_USERNAME=miiao29_user
# SPRING_DATASOURCE_PASSWORD=miiao29_pass

# ----- OPTION B: SUPABASE (Production/Cloud) -----
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/database
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_DB_HOST=db.your-project-ref.supabase.co
SUPABASE_DB_PORT=5432
SUPABASE_DB_NAME=postgres
SUPABASE_DB_USER=postgres
SUPABASE_DB_PASSWORD=your-database-password

# Spring Boot connection for Supabase
# Format: jdbc:postgresql://db.[PROJECT_REF].supabase.co:5432/postgres
SPRING_DATASOURCE_URL=jdbc:postgresql://db.your-project-ref.supabase.co:5432/postgres
SPRING_DATASOURCE_USERNAME=postgres
SPRING_DATASOURCE_PASSWORD=your-database-password

# Supabase API Keys (for optional direct API calls)
# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ==========================================
# 2. FILE STORAGE CONFIGURATION
# ==========================================

# ----- OPTION A: LOCAL STORAGE (Development) -----
# Uncomment for local file storage
# STORAGE_TYPE=local
# APP_UPLOAD_DIR=/app/uploads

# ----- OPTION B: CLOUDFLARE R2 (Production/Cloud) -----
# Get these from: https://dash.cloudflare.com -> R2 -> Manage R2 API Tokens
STORAGE_TYPE=r2

# R2 Account and Bucket
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_BUCKET_NAME=digital-signature-files

# R2 Access Keys (Create from Cloudflare Dashboard)
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key

# R2 Endpoint (S3-compatible)
# Format: https://[ACCOUNT_ID].r2.cloudflarestorage.com
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com

# Public URL for accessing files (if using public bucket or custom domain)
R2_PUBLIC_URL=https://your-bucket.your-domain.com

# ==========================================
# 3. BACKEND CONFIGURATION (SPRING BOOT)
# ==========================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
JWT_EXPIRATION=900000

# Server Port
SERVER_PORT=5555
BACKEND_PORT=5555
BACKEND_INTERNAL_PORT=5555

# Base URL (Change for production)
APP_BASE_URL=http://localhost:5555

# CORS Configuration (Update for production frontend URL)
CORS_ALLOWED_ORIGIN=http://localhost:5556
FRONTEND_URL=http://localhost:5556

# Email Configuration
APP_EMAIL_ENABLED=false
APP_EMAIL_TEST_MODE=true

# ==========================================
# 4. FRONTEND CONFIGURATION (VITE / REACT)
# ==========================================
VITE_API_URL=http://localhost:5555
VITE_APP_NAME=Digital Signature
FRONTEND_PORT=5556
FRONTEND_INTERNAL_PORT=80

# Environment Flags
VITE_IS_DEV=false 
VITE_IS_PROD=true
VITE_I18N_DEFAULT_LANG=vi

# Mock Service Worker (Keep false for production)
VITE_USE_MSW=false

# ==========================================
# 5. PKI CRYPTO CONFIGURATION
# ==========================================
# AES key for encrypting RSA private keys (MUST be exactly 32 characters)
# IMPORTANT: Generate a new secure key for production!
CRYPTO_AES_KEY=YourSecure32ByteAESKeyHere12345

# ==========================================
# 6. RENDER DEPLOYMENT (Optional)
# ==========================================
# These are automatically set by Render
# RENDER=true
# RENDER_SERVICE_NAME=digital-signature-backend
# RENDER_EXTERNAL_URL=https://your-app.onrender.com